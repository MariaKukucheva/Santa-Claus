<!DOCTYPE html>
<html lang="bg">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Дядо Коледа</title>
    <link href="https://fonts.googleapis.com/css2?family=Shadows+Into+Light&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://kit.fontawesome.com/446821780a.js" crossorigin="anonymous"></script>
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>

    <script>
        (function () {
            emailjs.init("TJULlODePTqsdme-Y");
        })();
        function sendEmail(event) {
            event.preventDefault(); // Prevent any default form action

            emailjs.sendForm('service_0rwrqw4', 'template_4p0gv1w', event.target)
                .then(function (response) {
                    alert("Успешно изпратихте писмото!");
                    window.location.href = "/success.html"; // Redirect to a page within the site
                })
                .catch(function (error) {
                    alert("Възникна грешка: " + JSON.stringify(error));
                });
        }
    </script>
</head>

<body>
    <section class="snow">
        <div class="snowflake"><i class="fa-regular fa-snowflake"></i></div>
        <div class="snowflake1"><i class="fa-regular fa-snowflake"></i></div>
        <div class="snowflake2"><i class="fa-regular fa-snowflake"></i></div>
        <div class="snowflake3"><i class="fa-regular fa-snowflake"></i></div>
        <div class="snowflake4"><i class="fa-regular fa-snowflake"></i></div>
        <div class="snowflake5"><i class="fa-regular fa-snowflake"></i></div>
        <div class="snowflake6"><i class="fa-regular fa-snowflake"></i></div>
        <div class="snowflake7"><i class="fa-regular fa-snowflake"></i></div>
        <div class="snowflake8"><i class="fa-regular fa-snowflake"></i></div>
        <div class="snowflake9"><i class="fa-regular fa-snowflake"></i></div>
        <div class="snowflake10"><i class="fa-solid fa-snowflake"></i></div>
        <div class="snowflake11"><i class="fa-solid fa-snowflake"></i></div>
        <div class="snowflake12"><i class="fa-regular fa-snowflake"></i></div>
        <div class="snowflake13"><i class="fa-regular fa-snowflake"></i></div>
        <div class="snowflake14"><i class="fa-regular fa-snowflake"></i></div>
    </section>
    <header>
        <nav class="navbar navbar-expand-lg">
            <a class="navbar-brand" href="index.html">
                <img src="image/logo.png" width="40" height="40" class="d-inline-block align-top" alt="logo">
            </a>
            <h3>Пощата на Дядо Коледа</h3>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup"
                aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                    <div class="navbar-nav">
                        <a class="nav-link active" href="index.html">Начало</a>
                        <a class="nav-link" href="letter.html">Напиши писмо</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>
    <main>
        <section class="text-background">
            <div class="text-content">
                <h1>Напиши писмо до Дядо Коледа</h1>
            </div>
        </section>
        <br>
        <section>
            <div class="frame-container light">
                <div class="row">
                    <div class="col-12">
                        <form name="Form" id="Form" onsubmit="sendEmail(event)" method="post">

                            <div class="tab">
                                <div class="row">
                                    <div class="col-6">
                                        <img class="form-img tab1" src="image/SantaClaus1tab.png" alt="SantaClaus">
                                    </div>
                                    <div class="col-6">
                                        <p class="bubble">Здравей! Аз съм Дядо Коледа и добре дошъл в моята поща. Хайде
                                            да напишем и твоето
                                            писмо!</p>
                                    </div>
                                </div>
                            </div>
                            <div class="tab">
                                <div class="row">
                                    <div class="col-6">
                                        <img class="form-img tab2" src="image/ElfG.png" alt="elf">
                                    </div>
                                    <div class="col-6">
                                        <p class="bubble">Нека да започнем с най-важното - твоето име. Така Дядо Коледа
                                            ще може да провери
                                            името ти в списъка на послушните хлапета!
                                        </p>
                                        <p class="input-container">
                                            <label for="name">Аз съм:</label>
                                            <input type="text" id="name" name="name" placeholder="Иван Иванов" required>
                                            <small class="error-message">Моля, напиши името си.</small>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="tab">
                                <div class="row">
                                    <div class="col-6">
                                        <img class="form-img tab3" src="image/ElfM.png" alt="elf">
                                    </div>
                                    <div class="col-6">
                                        <p class="bubble">
                                            Тук ще ти трябва малко помощ от мама или тате. Помоли ги да попълнят това
                                            поле с теб.
                                        </p>
                                        <p class="input-container">
                                            <label for="email">Имейл адресът на моите родители е:</label>
                                            <input type="email" id="email" name="email" placeholder="maria@abv.bg"
                                                required>
                                            <small class="error-message">Моля, напиши имейла на родителите си.</small>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="tab">
                                <div class="row">
                                    <div class="col-6">
                                        <img class="form-img tab4" src="image/deer.png" alt="elf">
                                    </div>
                                    <div class="col-6">
                                        <p class="bubble">
                                            Сега едно от най-важните неща. Къде да оставим подръците?
                                        </p>
                                        <p class="input-container">
                                            <label for="town">Аз живея в:</label>
                                            <input type="text" id="town" name="town" placeholder="София" required>
                                            <small class="error-message">Моля, напиши в кой град живееш.</small>
                                            <br>
                                            <label for="street">На улица:</label>
                                            <input type="text" id="street" name="street" placeholder="Христо Ботев 5 ет.3" required>
                                            <small class="error-message">Моля, напиши адреса си.</small>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="tab">
                                <div class="row">
                                    <div class="col-6">
                                        <img class="form-img tab5" src="image/giftGirl.png" alt="elf">
                                    </div>
                                    <div class="col-6">
                                        <p class="bubble">
                                            И най-вълнуващата част. Какво си пожелаваш за Коледа?
                                        </p>
                                        <p class="input-container">
                                            <label for="message">Моите желания:</label><br>
                                            <textarea id="message" name="message" placeholder="1. Кукла, 2. Влакче ..."
                                                required></textarea>
                                            <small class="error-message">Моля, напиши какво желаеш за Коледа.</small>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-6">
                                    <button class="send" type="button" id="prevBtn"
                                        onclick="nextPrev(-1)">Назад</button>
                                </div>
                                <div class="col-6">
                                    <button class="send" type="button" id="nextBtn"
                                        onclick="nextPrev(1)">Напред</button>

                                    <button class="send" type="submit" id="submitBtn" style="display:none;">
                                        Изпрати моето писмо
                                    </button>
                                </div>
                            </div>
                            <div style="text-align:center;margin-top:40px;">
                                <span class="step"></span>
                                <span class="step"></span>
                                <span class="step"></span>
                                <span class="step"></span>
                                <span class="step"></span>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <br><br><br>
        <br><br><br>
    </main>
    <footer>
        <p class="copyright">&copy; 2024 Пощата на Дядо Коледа</p>
    </footer>
    <script>
        var currentTab = 0;
        showTab(currentTab);
        function showTab(n) {
            var x = document.getElementsByClassName("tab");
            x[n].style.display = "block";
            if (n == 0) {
                document.getElementById("prevBtn").style.display = "none";
            } else {
                document.getElementById("prevBtn").style.display = "inline";
            }
            if (n == (x.length - 1)) {
                document.getElementById("nextBtn").style.display = "none";
                document.getElementById("submitBtn").style.display = "inline";
            } else {
                document.getElementById("nextBtn").style.display = "inline";
                document.getElementById("submitBtn").style.display = "none";
            }
            fixStepIndicator(n);
        }

        function nextPrev(n) {
            var x = document.getElementsByClassName("tab");
            if (n == 1 && !validateForm()) return false;
            x[currentTab].style.display = "none";
            currentTab = currentTab + n;
            if (currentTab >= x.length) {
                document.getElementById("Form").submit();
                return false;
            }
            showTab(currentTab);
        }

        function validateForm() {
            var x, y, i, valid = true;
            x = document.getElementsByClassName("tab");
            y = x[currentTab].getElementsByTagName("input");
            for (i = 0; i < y.length; i++) {
                if (y[i].value == "") {
                    y[i].className += " invalid";
                    valid = false;
                    if (y[i].nextElementSibling) {
                        y[i].nextElementSibling.style.display = "block";
                    }
                } else {
                    y[i].className = y[i].className.replace(" invalid", "");
                    if (y[i].nextElementSibling) {
                        y[i].nextElementSibling.style.display = "none";
                    }
                }
            }
                 var email = document.getElementById("email");
    var emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
    if (email.value && !emailPattern.test(email.value)) {
        valid = false;
        email.classList.add("invalid");
        if (email.nextElementSibling) {
            email.nextElementSibling.style.display = "block";
            email.nextElementSibling.textContent = "Моля, въведи валиден имейл адрес.";
        }
    }
            if (valid) {
                document.getElementsByClassName("step")[currentTab].className += " finish";
            }
            return valid;
        }
        function fixStepIndicator(n) {
            var i, x = document.getElementsByClassName("step");
            for (i = 0; i < x.length; i++) {
                x[i].className = x[i].className.replace(" active", "");
            }
            x[n].className += " active";
        }
    </script>
</body>

</html>